(function(e){function t(t){for(var n,a,i=t[0],u=t[1],c=t[2],d=0,p=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==o[u]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={app:0},s=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0f71":function(e,t,r){e.exports=r.p+"img/user.e4598350.png"},3595:function(e,t,r){e.exports=r.p+"img/logo4.ff2dbe03.png"},4678:function(e,t,r){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=s,e.exports=o,o.id="4678"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("app-header"),r("user-msg"),r("router-view")],1)},s=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.alive?r("div",{staticClass:"alert",class:e.alertClass},[e._v(" "+e._s(e.msg.txt)+" ")]):e._e()},i=[],u="show-msg",c=new n["default"];function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";c.$emit(u,{txt:e,type:t})}var d={name:"userMsg",components:{},created:function(){var e=this;c.$on(u,(function(t){e.msg=t;var r=t.delay||2e3;e.alive=!0,setTimeout((function(){e.alive=!1}),r)}))},data:function(){return{alive:!1,msg:null}},computed:{alertClass:function(){if(this.msg)return"alert-".concat(this.msg.type)}}},p=d,v=r("2877"),f=Object(v["a"])(p,a,i,!1,null,null,null),m=f.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"header-section main-layout"},[n("div",{staticClass:"header-main"},[n("div",{staticClass:"logo-section",on:{click:e.goToToys}},[n("img",{staticClass:"logo-img",attrs:{src:r("3595")}})]),n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[e._v("Home ")]),e._v(" | "),n("router-link",{attrs:{to:"/toy"}},[e._v("Toys-app ")]),e._v(" | "),n("router-link",{attrs:{to:"/about"}},[e._v("About ")]),e._v(" | "),n("router-link",{attrs:{to:"/dashboard"}},[e._v("Dashboard ")]),e._v(" | "),n("router-link",{attrs:{to:"/signup"}},[e._v("Signup ")]),e._v(" | "),n("router-link",{attrs:{to:"/login"}},[e._v("Login ")])],1)])])},h=[],y={computed:{loggedinUserName:function(){return this.$store.getters.loggedinUserName||""}},methods:{goToToys:function(){this.$router.push("/toy")}}},b=y,w=Object(v["a"])(b,g,h,!1,null,null,null),_=w.exports,j={components:{userMsg:m,appHeader:_},created:function(){this.$store.dispatch({type:"loadToys"})}},x=j,k=Object(v["a"])(x,o,s,!1,null,null,null),T=k.exports,R=r("5c96"),O=r.n(R),E=(r("0fae"),r("755e")),S=r("8c4f"),U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("hello-world",{attrs:{msg:"Welcome to Mister Toy App!"}})],1)},$=[],C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hello"},[r("h1",[e._v(e._s(e.msg))])])},I=[],L={name:"helloWorld",props:{msg:String},data:function(){return{}}},N=L,P=Object(v["a"])(N,C,I,!1,null,null,null),A=P.exports,B={name:"home",components:{helloWorld:A}},M=B,z=Object(v["a"])(M,U,$,!1,null,null,null),D=z.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"about"},[r("h1",[e._v("You can find us at:")]),r("GmapMap",{staticClass:"map",attrs:{options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!1,fullscreenControl:!0,disableDefaultUi:!1}}})],1)},J=[],q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GmapMap",{staticStyle:{width:"500px",height:"300px"},attrs:{center:e.center,zoom:7,"map-type-id":"terrain"}},e._l(e.markers,(function(t,n){return r("GmapMarker",{key:n,attrs:{position:t.position,clickable:!0,draggable:!0},on:{click:function(r){e.center=t.position}}})})),1)},W=[],G={data:function(){return{markers:[{position:{lat:31.547201,lng:34.832581}},{position:{lat:32.047104,lng:34.832384}},{position:{lat:32.747098,lng:34.972021}}],center:{lat:32.047175,lng:34.832301}}},created:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var r=t.coords,n=r.latitude,o=r.longitude;e.center.lat=n,e.center.lng=o}))}},Y=G,V=Object(v["a"])(Y,q,W,!1,null,null,null),H=V.exports,X={components:{GmapMap:H}},K=X,Q=Object(v["a"])(K,F,J,!1,null,null,null),Z=Q.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"signup-section"},[n("div",{staticClass:"img-container"},[n("img",{staticClass:"preview-img",attrs:{src:r("9ddd")}})]),n("h1",[e._v("welcome new user! Signup here")]),n("h2",[e._v(" Hello "),e.user?n("span",[e._v(e._s(e.getLoggedinUser.fullname))]):e._e()]),n("form",{staticClass:"signup-form",on:{submit:function(t){return t.preventDefault(),e.doSignup.apply(null,arguments)}}},[n("label",[e._v("Username: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Enter your username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),n("label",[e._v("Fullname: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.fullname,expression:"fullname"}],attrs:{type:"text",placeholder:"Enter your fullname"},domProps:{value:e.fullname},on:{input:function(t){t.target.composing||(e.fullname=t.target.value)}}})]),n("label",[e._v("Password: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"text",placeholder:"Enter your password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("button",{staticClass:"btn-action btn-signup"},[e._v("save")])])])},te=[],re=r("1da1"),ne=(r("96cf"),r("e9c4"),r("7db0"),r("d3b7"),r("c740"),r("a434"),{query:oe,get:se,post:ae,put:ie,remove:ue});function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=JSON.parse(localStorage.getItem(e))||[];return new Promise((function(e){setTimeout((function(){e(r)}),t)}))}function se(e,t){return oe(e).then((function(e){return e.find((function(e){return e._id===t}))}))}function ae(e,t){return t._id=le(),oe(e).then((function(r){return r.push(t),ce(e,r),t}))}function ie(e,t){return oe(e).then((function(r){var n=r.findIndex((function(e){return e._id===t._id}));return r.splice(n,1,t),ce(e,r),t}))}function ue(e,t){return oe(e).then((function(r){var n=r.findIndex((function(e){return e._id===t}));if(n<0)throw new Error("Unknown Entity ".concat(t));r.splice(n,1),ce(e,r)}))}function ce(e,t){localStorage.setItem(e,JSON.stringify(t))}function le(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}r("99af");var de=r("bc3a"),pe=r.n(de),ve="/api/",fe=pe.a.create({withCredentials:!0}),me={get:function(e,t){return ge(e,"GET",t)},post:function(e,t){return ge(e,"POST",t)},put:function(e,t){return ge(e,"PUT",t)},delete:function(e,t){return ge(e,"DELETE",t)}};function ge(e){return he.apply(this,arguments)}function he(){return he=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"GET",n=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,fe({url:"".concat(ve).concat(t),method:r,data:n,params:"GET"===r?n:null});case 5:return o=e.sent,e.abrupt("return",o.data);case 9:throw e.prev=9,e.t0=e["catch"](2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data:"),n),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(void 0).push("/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),he.apply(this,arguments)}var ye="loggedinUser",be=null,we={login:_e,logout:Te,signup:xe,getLoggedinUser:Oe,getUsers:$e,getById:Ce,remove:Le,update:Ne,changeScore:Se};function _e(e,t){return je.apply(this,arguments)}function je(){return je=Object(re["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.post("auth/login",{username:t,password:r});case 3:return n=e.sent,console.log("res",n),sessionStorage.setItem(ye,JSON.stringify(n.data)),e.abrupt("return",Ee(n));case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),je.apply(this,arguments)}function xe(e,t,r){return ke.apply(this,arguments)}function ke(){return ke=Object(re["a"])(regeneratorRuntime.mark((function e(t,r,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.post("auth/signup",{username:t,password:r,fullname:n});case 3:return o=e.sent,sessionStorage.setItem(ye,JSON.stringify(o.data)),e.abrupt("return",Ee(o));case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),ke.apply(this,arguments)}function Te(){return Re.apply(this,arguments)}function Re(){return Re=Object(re["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.post("auth/logout",null);case 3:return t=e.sent,sessionStorage.setItem(ye,null),e.abrupt("return",t.data);case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),Re.apply(this,arguments)}function Oe(){return JSON.parse(sessionStorage.getItem(ye))||null}function Ee(e){return sessionStorage.setItem(ye,JSON.stringify(e)),e}function Se(e){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=Oe(),r){e.next=3;break}throw new Error("Not loggedin");case 3:return r.score=r.score+t||t,e.next=6,Ne(r);case 6:return e.abrupt("return",r.score);case 7:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}function $e(){return me.get("user")}function Ce(e){return Ie.apply(this,arguments)}function Ie(){return Ie=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,me.get("user/".concat(t));case 2:return r=e.sent,be=r,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}function Le(e){return me.delete("user/".concat(e))}function Ne(e){return Pe.apply(this,arguments)}function Pe(){return Pe=Object(re["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,me.put("user/".concat(t._id),t);case 2:return t=e.sent,Oe()._id===t._id&&Ee(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}window.userService=we,Object(re["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Oe(),window.addEventListener("storage",Object(re["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(be){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ne.query("user");case 4:if(t=e.sent,r=t.find((function(e){return e._id===be._id})),r){e.next=8;break}return e.abrupt("return");case 8:be.score!==r.score&&console.log("Watched user score changed - localStorage updated from another browser"),be=r;case 10:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})))();var Ae={data:function(){return{username:"",password:"",fullname:"",user:null}},methods:{doSignup:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"signup",username:e.username,fullname:e.fullname,password:e.password});case 3:r=t.sent,e.user=r,e.$store.commit({type:"setLoggedinUser",user:r}),e.$router.push("/toy"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}},computed:{getLoggedinUser:function(){return console.log(this.$store.getters.loggedinUser),this.$store.getters.loggedinUser}}},Be=Ae,Me=Object(v["a"])(Be,ee,te,!1,null,null,null),ze=Me.exports,De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"login-section"},[n("div",{staticClass:"img-container"},[n("img",{staticClass:"preview-img",attrs:{src:r("0f71")}})]),n("h1",[e._v("Welcome back! Login here")]),n("h2",[e._v(" Hello: "),n("span",[e._v(e._s(e.getLoggedinUser.fullname)+"!")])]),n("form",{staticClass:"login-form",on:{submit:function(t){return t.preventDefault(),e.doLogin.apply(null,arguments)}}},[n("label",[e._v("Username: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Enter your username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),n("label",[e._v("Password: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"text",placeholder:"Enter your password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("button",{staticClass:"btn-action btn-login"},[e._v("save")])]),n("button",{staticClass:"btn-action btn-logout",on:{click:e.doLogout}},[e._v("Log out")]),n("details",[n("summary",[e._v("Admin Section")]),n("ul",e._l(e.users,(function(t){return n("li",{key:t._id},[n("pre",[e._v(e._s(t))]),n("button",{on:{click:function(r){return e.removeUser(t._id)}}},[e._v("x")])])})),0)])])},Fe=[],Je={data:function(){return{username:"",password:"",user:null}},created:function(){this.loadUsers()},methods:{doLogin:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"login",username:e.username,password:e.password});case 3:r=t.sent,e.user=r,e.$store.commit({type:"setLoggedinUser",user:r}),e.$router.push("/toy"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},doLogout:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.$store.dispatch({type:"logout"}),e.user=null,e.$router.go()}catch(r){console.log(r)}case 1:case"end":return t.stop()}}),t)})))()},loadUsers:function(){this.$store.dispatch({type:"loadUsers"})},removeUser:function(e){var t=this;return Object(re["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"removeUser",userId:e});case 3:console.log("User removed"),r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),console.log("Failed to remove user");case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()}},computed:{getLoggedinUser:function(){return this.$store.getters.loggedinUser||""},users:function(){return this.$store.getters.users}}},qe=Je,We=Object(v["a"])(qe,De,Fe,!1,null,null,null),Ge=We.exports,Ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"app-main"},[r("toy-filter",{attrs:{"main-layout":""},on:{filtered:e.setFilter,sorted:e.setSort}}),r("div",{staticClass:"add-toy-section"},[e.getIsLoggedinUserAdmin?r("router-link",{staticClass:"router-link-btn",attrs:{to:"/toy/edit"}},[e._v("Add toy")]):e._e()],1),e.isLoading?r("p",[e._v("Loading...")]):e.toys?r("toy-list",{attrs:{toys:e.toys},on:{remove:e.removeToy}}):e._e()],1)},Ve=[],He=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"toy-filter main-layout"},[r("div",{staticClass:"filter-section"},[r("label",{staticClass:"label-input-section"},[e._v(" Search a toy: "),r("el-input",{attrs:{placeholder:"Search...."},on:{input:e.setFilter},model:{value:e.filterBy.name,callback:function(t){e.$set(e.filterBy,"name",t)},expression:"filterBy.name"}})],1),r("label",{staticClass:"label-input-section"},[e._v(" Stock: "),r("el-select",{attrs:{placeholder:"Select stock"},on:{change:e.setFilter},model:{value:e.filterBy.inStock,callback:function(t){e.$set(e.filterBy,"inStock",t)},expression:"filterBy.inStock"}},[r("el-option",{attrs:{value:""}},[e._v("All")]),r("el-option",{attrs:{value:"true"}},[e._v("In stock")]),r("el-option",{attrs:{value:"false"}},[e._v("Not in stock")])],1)],1),r("label",{staticClass:"label-input-section"},[e._v(" Labels: "),r("el-select",{attrs:{multiple:"",placeholder:"Select"},on:{change:e.setFilter},model:{value:e.filterBy.label,callback:function(t){e.$set(e.filterBy,"label",t)},expression:"filterBy.label"}},e._l(e.labels,(function(e,t){return r("el-option",{key:t,attrs:{value:e}})})),1)],1),r("label",{staticClass:"label-input-section"},[e._v(" Sort By: "),r("el-select",{on:{change:e.setFilter},model:{value:e.filterBy.sort,callback:function(t){e.$set(e.filterBy,"sort",t)},expression:"filterBy.sort"}},[r("el-option",{attrs:{value:"time"}},[e._v("Time")]),r("el-option",{attrs:{value:"name"}},[e._v("Name")]),r("el-option",{attrs:{value:"price"}},[e._v("Price")])],1)],1)])])},Xe=[];function Ke(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function Qe(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function Ze(e,t){var r;return function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=function(){clearTimeout(r),e.apply(void 0,o)};clearTimeout(r),r=setTimeout(a,t)}}var et={makeId:Ke,getRandomInt:Qe,debounce:Ze},tt={name:"toyFilter",props:{},data:function(){return{filterBy:{name:"",label:[],inStock:null,pageIdx:0,sort:"time"}}},created:function(){this.setFilter=et.debounce(this.setFilter,1e3)},methods:{setFilter:function(){this.$emit("filtered",this.filterBy)},setSort:function(){this.$emit("sorted",this.sortBy)},changePage:function(e){this.filterBy.pageIdx=e,this.setFilter()}},computed:{pages:function(){return console.log(Math.ceil(this.$store.getters.getNumOfPages)),Math.ceil(this.$store.getters.getNumOfPages)},labels:function(){return console.log(this.$store.getters.getToysLabels),this.$store.getters.getToysLabels}}},rt=tt,nt=Object(v["a"])(rt,He,Xe,!1,null,null,null),ot=nt.exports,st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"list-section"},[r("ul",{staticClass:"toy-list"},e._l(e.toys,(function(t){return r("li",{key:t._id,staticClass:"toy-preview-container"},[r("toy-preview",{attrs:{toy:t}}),r("div",{staticClass:"btns-container"},[e.getIsLoggedinUserAdmin?r("button",{staticClass:"btn-action",on:{click:function(r){return e.remove(t._id)}}},[e._v(" Delete ")]):e._e(),r("router-link",{staticClass:"router-link-btn",attrs:{to:"/toy/"+t._id}},[e._v("Details")]),e.getIsLoggedinUserAdmin?r("router-link",{staticClass:"router-link-btn",attrs:{to:"/toy/edit/"+t._id}},[e._v("Edit")]):e._e()],1)],1)})),0)])},at=[],it=(r("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"toy-preview"},[n("div",{staticClass:"toy-preview-info"},[n("div",{staticClass:"img-container"},[n("img",{staticClass:"preview-img",attrs:{src:r("95f5")("./toy"+e.randNum+".png")}})]),n("h2",[e._v(e._s(e.toy.name))]),n("h4",[e._v(e._s(e.toy._id))]),n("h4",[e._v(e._s(e.toy.price)+"$")]),n("h4",[e._v("In stock? "+e._s(e.toy.inStock))])])])}),ut=[],ct={name:"toyPreview",props:{toy:{type:Object,default:{}}},computed:{randNum:function(){return Math.floor(7*Math.random()+1)}}},lt=ct,dt=Object(v["a"])(lt,it,ut,!1,null,null,null),pt=dt.exports,vt={name:"toyList",props:{toys:{type:Array,validator:function(e){return e.every((function(e){return e._id&&e.price&&e.name}))},default:[]}},methods:{remove:function(e){this.$emit("remove",e)}},components:{toyPreview:pt},computed:{getIsLoggedinUserAdmin:function(){return this.$store.getters.getIsLoggedinUserAdmin}}},ft=vt,mt=Object(v["a"])(ft,st,at,!1,null,null,null),gt=mt.exports,ht={name:"toyApp",components:{toyFilter:ot,toyList:gt},data:function(){return{}},computed:{toys:function(){return this.$store.getters.toysToShow},isLoading:function(){return this.$store.getters.isLoading},getIsLoggedinUserAdmin:function(){return this.$store.getters.getIsLoggedinUserAdmin}},created:function(){this.$store.dispatch({type:"loadToys"})},methods:{setFilter:function(e){var t=this;return Object(re["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,n=JSON.parse(JSON.stringify(e)),r.next=4,t.$store.commit({type:"setFilter",copyFilter:n});case 4:return r.next=6,t.$store.dispatch({type:"loadToys"});case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},setSort:function(e){var t=JSON.parse(JSON.stringify(e));this.$store.commit({type:"setSort",copySort:t})},removeToy:function(e){var t=this;return Object(re["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$store.dispatch({type:"removeToy",toyId:e});case 3:n=r.sent,n?l("Toy removed ".concat(n)):l("Yoy are not allowed to remove","danger"),r.next=11;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log(r.t0),l("Failed to remove Toy");case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},yt=ht,bt=Object(v["a"])(yt,Ye,Ve,!1,null,null,null),wt=bt.exports,_t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[e.isLoading?r("section",[r("p",[e._v("Loading...")])]):r("section",{staticClass:"toy-edit-container app-main"},[e.toyToEdit?r("h3",[e._v(e._s(e.title))]):e._e(),e.toyToEdit?r("form",{staticClass:"toy-edit-form",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[r("label",[e._v("Toy name: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.toyToEdit.name,expression:"toyToEdit.name"}],attrs:{type:"text",placeholder:"name"},domProps:{value:e.toyToEdit.name},on:{input:function(t){t.target.composing||e.$set(e.toyToEdit,"name",t.target.value)}}})]),r("ValidationProvider",{attrs:{rules:"positive"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("label",[e._v("Toy price: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.toyToEdit.price,expression:"toyToEdit.price"}],attrs:{type:"number",placeholder:"price"},domProps:{value:e.toyToEdit.price},on:{input:function(t){t.target.composing||e.$set(e.toyToEdit,"price",t.target.value)}}}),r("span",[e._v(e._s(n[0]))])])]}}],null,!1,1522621509)}),r("label",[e._v("Is in stock? "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.toyToEdit.inStock,expression:"toyToEdit.inStock"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.toyToEdit,"inStock",t.target.multiple?r:r[0])}}},[r("option",{domProps:{value:!0}},[e._v("Yes")]),r("option",{domProps:{value:!1}},[e._v("No")])])]),r("label",[e._v("Choose labels:")]),e.toyToEdit.label?r("select",{directives:[{name:"model",rawName:"v-model",value:e.toyToEdit.label,expression:"toyToEdit.label"}],attrs:{multiple:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.toyToEdit,"label",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"On wheels"}},[e._v("On wheels")]),r("option",{attrs:{value:"Box game"}},[e._v("Box game")]),r("option",{attrs:{value:"Art"}},[e._v("Art")]),r("option",{attrs:{value:"Baby"}},[e._v("Baby")]),r("option",{attrs:{value:"Doll"}},[e._v("Doll")]),r("option",{attrs:{value:"Puzzle"}},[e._v("Puzzle")]),r("option",{attrs:{value:"Outdoor"}},[e._v("Outdoor")])]):e._e(),r("button",{staticClass:"btn-action btn-save"},[e._v("Save")])],1):e._e(),r("router-link",{staticClass:"router-link-btn",attrs:{to:"/toy"}},[e._v("Back")])],1)])},jt=[],xt=r("7bb1");Object(xt["b"])("positive",(function(e){return e>=0}));var kt={name:"toyEdit",components:{ValidationProvider:xt["a"]},data:function(){return{toyToEdit:{},priceValidation:0}},created:function(){var e=this;this.toyId?this.$store.dispatch({type:"setCurrToy",toyId:this.toyId}).then((function(){e.toyToEdit=e.$store.getters.getCurrToy,console.log("this.toyToEdit",e.toyToEdit)})):this.$store.dispatch({type:"setNewToy"}).then((function(){return e.toyToEdit=e.$store.getters.getCurrToy}))},methods:{save:function(){var e=this;console.log("toy label",this.toyToEdit.label),this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then((function(t){console.log("save new"),e.$router.push("/toy")}))}},computed:{getCurrentToy:function(){return this.$store.getters.getCurrToy},title:function(){return this.toyId?"Edit toy":"Add toy"},toyId:function(){return console.log(this.$route.params.toyId),this.$route.params.toyId||""},isLoading:function(){return this.$store.getters.isLoading}}},Tt=kt,Rt=Object(v["a"])(Tt,_t,jt,!1,null,null,null),Ot=Rt.exports,Et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.toy?n("section",{staticClass:"toy-details-section app-main"},[n("h3",[e._v("Toy details")]),n("div",{staticClass:"img-container"},[n("img",{staticClass:"preview-img",attrs:{src:r("95f5")("./toy"+e.randNum+".png")}})]),n("h4",[e._v("Name: "+e._s(e.toy.name))]),n("h4",[e._v("Id: "+e._s(e.toy._id))]),n("h4",[e._v("Price: "+e._s(e.toy.price)+"$")]),n("h4",[e._v(" Labels: "),e._l(e.toy.labels,(function(t,r){return n("span",{key:r},[e._v(e._s(t)+", ")])}))],2),n("h4",[e._v("Created At: "+e._s(e.toy.createdAt))]),n("h4",[e._v("Is in stock? "+e._s(e.toy.inStock))]),e.reviews?n("div",{staticClass:"reviews-container"},[n("p",[e._v("What do you think about this toy?..")]),e._l(e.reviews,(function(t,r){return n("div",{key:r,staticClass:"review-card"},[n("div",{staticClass:"byUser"},[n("p",[e._v(e._s(t.byUser.fullname))])]),n("p",[e._v(e._s(t.txt))]),n("span",[e._v(e._s(t.createdAt))]),n("el-button",{staticClass:"btn",on:{click:function(r){return e.removeReview(t._id)}}},[e._v("X")])],1)})),n("form",{staticClass:"review-form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.reviewToEdit.txt,expression:"reviewToEdit.txt"}],attrs:{placeholder:"Your Opinion Matters..."},domProps:{value:e.reviewToEdit.txt},on:{input:function(t){t.target.composing||e.$set(e.reviewToEdit,"txt",t.target.value)}}}),n("el-button",{on:{click:function(t){return e.addReview()}}},[e._v("Save")])],1)],2):e._e(),n("router-link",{staticClass:"router-link-btn",attrs:{to:"/toy"}},[e._v("Back")])],1):e._e()},St=[],Ut="/api/toy/",$t=r("bc3a"),Ct={query:It,getById:Nt,remove:At,save:Mt,getEmptyToy:Dt};function It(e){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$t.get(Ut,{params:t});case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Lt.apply(this,arguments)}function Nt(e){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$t.get(Ut+t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Pt.apply(this,arguments)}function At(e){return Bt.apply(this,arguments)}function Bt(){return Bt=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("remove get this id",t),e.next=4,$t.delete(Ut+t,{withCredentials:!0});case 4:return r=e.sent,console.log("res.data",r.data),e.abrupt("return",r.data);case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),Bt.apply(this,arguments)}function Mt(e){return zt.apply(this,arguments)}function zt(){return zt=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t._id){e.next=13;break}return e.prev=1,e.next=4,$t.put(Ut+t._id,t,{withCredentials:!0});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:e.next=23;break;case 13:return e.prev=13,e.next=16,$t.post(Ut,t,{withCredentials:!0});case 16:return n=e.sent,e.abrupt("return",n.data);case 20:e.prev=20,e.t1=e["catch"](13),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[1,8],[13,20]])}))),zt.apply(this,arguments)}function Dt(){return Promise.resolve({_id:"",name:"",price:null,label:[],createdAt:new Date(Date.now()).toLocaleString(),inStock:!0,reviews:[]})}var Ft,Jt,qt={name:"toyDetails",components:{},data:function(){return{reviewToEdit:{txt:"",aboutToyId:""},toy:null}},created:function(){this.loadToy()},computed:{randNum:function(){return Math.floor(7*Math.random()+1)},reviews:function(){return this.$store.getters.reviews},getToyId:function(){return this.toy._id}},methods:{removeReview:function(e){this.$store.dispatch({type:"removeReview",reviewId:e})},addReview:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch({type:"addReview",review:e.reviewToEdit});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:return t.prev=8,e.reviewToEdit.txt="",t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,5,8,11]])})))()},loadToy:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.$route.params.toyId,t.next=4,Ct.getById(r);case 4:n=t.sent,e.toy=n,e.reviewToEdit.aboutToyId=e.toy._id,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:return t.prev=12,e.$store.dispatch({type:"loadReviews",toyId:e.toy._id}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()}},watch:{"$route.params.toyId":{handler:function(){var e=this.$route.params.toyId;console.log("Changed to",e),this.$store.dispatch({type:"setCurrToy",toyId:e})},immediate:!0}}},Wt=qt,Gt=Object(v["a"])(Wt,Et,St,!1,null,null,null),Yt=Gt.exports,Vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dashboard-section"},[r("h1",[e._v("Dashboard")]),r("h3",[e._v("Prices per toy type")]),e.isDataReady?r("chart-price",{staticClass:"chartPrice",attrs:{labels:e.labels,avgs:e.avgs}}):e._e()],1)},Ht=[],Xt=r("1fca"),Kt={extends:Xt["a"],props:["labels","avgs"],mounted:function(){this.renderChart({labels:this.labels,datasets:[{label:"Average price",backgroundColor:"#f87979",data:this.avgs}]})}},Qt=Kt,Zt=Object(v["a"])(Qt,Ft,Jt,!1,null,null,null),er=Zt.exports,tr={components:{chartPrice:er},data:function(){return{isDataReady:!1}},computed:{toys:function(){return this.$store.getters.toys},labels:function(){return this.$store.getters.getToysLabels},avgs:function(){var e=this.$store.getters.getLabelsMap,t=[];for(var r in e){var n=e[r].sum/e[r].count;t.push(n)}return t}},watch:{toys:{immediate:!0,handler:function(){this.toys.length&&(this.isDataReady=!0),console.log(this.isDataReady)}}}},rr=tr,nr=Object(v["a"])(rr,Vt,Ht,!1,null,null,null),or=nr.exports,sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container home"},[r("ul",{staticClass:"review-list"},e._l(e.reviews,(function(t){return r("li",{key:t._id},[r("p",[e._v(" About "),r("router-link",{attrs:{to:"user/"+t.aboutUser._id}},[e._v(" "+e._s(t.aboutUser.fullname)+" ")])],1),r("h3",[e._v(e._s(t.txt))]),r("p",[e._v("By "),r("router-link",{attrs:{to:"user/"+t.byUser._id}},[e._v(" "+e._s(t.byUser.fullname)+" ")])],1),r("hr")])})),0),r("hr"),e.loggedInUser?r("form",{on:{submit:function(t){return t.preventDefault(),e.addReview()}}},[r("h2",[e._v("Your gossip:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.reviewToEdit.aboutUserId,expression:"reviewToEdit.aboutUserId"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reviewToEdit,"aboutUserId",t.target.multiple?r:r[0])}}},e._l(e.users,(function(t){return r("option",{key:t._id,domProps:{value:t._id}},[e._v(" "+e._s(t.fullname)+" ")])})),0),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reviewToEdit.txt,expression:"reviewToEdit.txt"}],attrs:{placeholder:"Your Opinion Matters..."},domProps:{value:e.reviewToEdit.txt},on:{input:function(t){t.target.composing||e.$set(e.reviewToEdit,"txt",t.target.value)}}}),r("button",[e._v("Save")])]):e._e()])},ar=[],ir={name:"home",data:function(){return{reviewToEdit:{txt:"",aboutUserId:null}}},computed:{reviews:function(){return this.$store.getters.reviews},users:function(){return this.$store.getters.users},loggedInUser:function(){return this.$store.getters.loggedinUser}},created:function(){this.$store.dispatch({type:"loadUsers"}),this.$store.dispatch({type:"loadReviews"})},methods:{addReview:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch({type:"addReview",review:e.reviewToEdit});case 2:e.reviewToEdit={txt:"",aboutUserId:null};case 3:case"end":return t.stop()}}),t)})))()}}},ur=ir,cr=Object(v["a"])(ur,sr,ar,!1,null,null,null),lr=cr.exports,dr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user?r("section",[r("h1",[e._v("User Details - "+e._s(e.user.fullname))]),r("h3",[e._v(e._s(e.user.username)+" score: "+e._s(e.user.score))]),r("ul",e._l(e.user.givenReviews,(function(t){return r("li",{key:t._id},[e._v(" "+e._s(t.txt)+" "),r("router-link",{attrs:{to:"/user/"+t.aboutUser._id}},[e._v(" About "+e._s(t.aboutUser.fullname)+" ")])],1)})),0),r("details",[r("summary",[e._v("Full JSON")]),r("pre",[e._v(e._s(e.user))])])]):e._e()},pr=[],vr={data:function(){return{}},created:function(){return Object(re["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},watch:{userId:{handler:function(){this.$store.dispatch({type:"loadAndWatchUser",userId:this.userId})},immediate:!0}},computed:{user:function(){return this.$store.getters.watchedUser},userId:function(){return this.$route.params.id}}},fr=vr,mr=Object(v["a"])(fr,dr,pr,!1,null,null,null),gr=mr.exports;n["default"].use(S["a"]);var hr=[{path:"/",name:"home",component:D},{path:"/about",name:"about",component:Z},{path:"/signup",name:"signup",component:ze},{path:"/review",name:"review",component:lr},{path:"/login",name:"login",component:Ge},{path:"/user/:id",name:"user-details",component:gr},{path:"/dashboard",name:"dashboard",component:or},{path:"/toy",name:"toyApp",component:wt},{path:"/toy/edit/:toyId?",name:"toyEdit",component:Ot},{path:"/toy/:toyId",name:"toyDetails",component:Yt}],yr=new S["a"]({routes:hr}),br=yr,wr=r("2f62"),_r=r("ade3"),jr=(r("159b"),{state:{isLoading:!1,toys:[],lastRemovedToy:null,currToy:null,pageSize:4,filterBy:{name:"",inStock:"",label:[],sort:"time"},labels:["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"],labelsMap:{"On wheels":{sum:0,count:0},"Box game":{sum:0,count:0},Art:{sum:0,count:0},Baby:{sum:0,count:0},Doll:{sum:0,count:0},Puzzle:{sum:0,count:0},Outdoor:{sum:0,count:0}}},getters:{toys:function(e){var t=e.toys;return t},isLoading:function(e){var t=e.isLoading;return t},getCurrToy:function(e){return JSON.parse(JSON.stringify(e.currToy))},getToysLabels:function(e){return JSON.parse(JSON.stringify(e.labels))},getLabelsMap:function(e){return e.labelsMap},toysToShow:function(e){return e.toys}},mutations:Object(_r["a"])({setLoading:function(e,t){var r=t.isLoading;e.isLoading=r},addToy:function(e,t){e.toys.push(t.toy)},updateLabelsCount:function(e){console.log("state.toys",e.toys),e.toys.forEach((function(t){var r=t.label;r.length&&r.forEach((function(r){e.labelsMap[r].sum+=+t.price,e.labelsMap[r].count++}))}))},updateToy:function(e,t){var r=e.toys.findIndex((function(e){return e._id===t.toy._id}));e.toys.splice(r,1,t.toy)},removeToy:function(e,t){var r=e.toys.findIndex((function(e){return e._id===t.toyId}));e.lastRemovedToy=e.toys[r],e.toys.splice(r,1)},undoRemoveToy:function(e){e.lastRemovedToy&&(e.toys.unshift(e.lastRemovedToy),e.lastRemovedToy=null)},setToys:function(e,t){var r=t.toys;e.toys=r,console.log("toys",r)},setFilter:function(e,t){var r=t.copyFilter;console.log(r),e.filterBy=r},setSort:function(e,t){var r=t.copySort;e.sortBy=r},setCurrToy:function(e,t){var r=t.toy;console.log("currToy",e.currToy),e.currToy=r,console.log("currToy",e.currToy)},setNewToy:function(e,t){var r=t.toy;e.currToy=r},saveToy:function(e,t){var r=t.toy;console.log("toy",r),e.toys.push(r)}},"removeToy",(function(e,t){var r=t.toyId;console.log("id in toy store commit",r);var n=e.toys.findIndex((function(e){return e._id===r}));e.toys.splice(n,1)})),actions:{loadToys:function(e){return Object(re["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,n({type:"setLoading",isLoading:!0}),t.prev=2,t.next=5,Ct.query(r.filterBy);case 5:return o=t.sent,console.log("toys",o),t.next=9,n({type:"setToys",toys:o});case 9:n({type:"updateLabelsCount"}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),console.log(t.t0);case 15:return t.prev=15,n({type:"setLoading",isLoading:!1}),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})))()},loadEdit:function(e){return Object(re["a"])(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,n=e.commit,n({type:"setLoading",isLoading:!0}),t.prev=2,t.next=5,Ct.query(r.filterBy);case 5:o=t.sent,n({type:"setToys",toys:o}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0);case 12:return t.prev=12,n({type:"setLoading",isLoading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})))()},addToy:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.toy,r.prev=2,r.next=5,Ct.save(o);case 5:return s=r.sent,n({type:"addToy",toy:s}),n({type:"updateLabelsCount",toy:s}),r.abrupt("return",s);case 11:r.prev=11,r.t0=r["catch"](2),console.log(r.t0);case 14:case"end":return r.stop()}}),r,null,[[2,11]])})))()},updateToy:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.toy,r.prev=2,r.next=5,Ct.save(o);case 5:return s=r.sent,n({type:"updateToy",toy:s}),n({type:"updateLabelsCount",toy:s}),r.abrupt("return",s);case 11:r.prev=11,r.t0=r["catch"](2),console.log(r.t0);case 14:case"end":return r.stop()}}),r,null,[[2,11]])})))()},removeToy:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.toyId,r.prev=2,r.next=5,Ct.remove(o);case 5:if(s=r.sent,!s){r.next=9;break}return n({type:"removeToy",toyId:o}),r.abrupt("return",s);case 9:r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](2),console.log(r.t0);case 14:case"end":return r.stop()}}),r,null,[[2,11]])})))()},setCurrToy:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.toyId,r.prev=2,r.next=5,Ct.getById(o);case 5:s=r.sent,n({type:"setCurrToy",toy:s}),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},setNewToy:function(e){return Object(re["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,Ct.getEmptyToy();case 4:n=t.sent,r({type:"setNewToy",toy:n}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},saveToy:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.toy,r.prev=2,r.next=5,Ct.save(o);case 5:return savedToy=r.sent,n({type:"saveToy",savedToy:savedToy}),r.abrupt("return",savedToy);case 10:r.prev=10,r.t0=r["catch"](2),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}}),xr=r("5530"),kr=(r("4de4"),{state:{users:[],loggedinUser:we.getLoggedinUser()||{fullname:""},watchedUser:null},getters:{loggedinUser:function(e){return e.loggedinUser},getIsLoggedinUserAdmin:function(e){var t;return(null===(t=e.loggedinUser)||void 0===t?void 0:t.isAdmin)||!1},loggedinUserName:function(e){return e.loggedinUser.fullname},users:function(e){var t=e.users;return t},watchedUser:function(e){var t=e.watchedUser;return t}},mutations:{setUsers:function(e,t){var r=t.users;e.users=r},setLoggedinUser:function(e,t){var r=t.user;e.loggedinUser=r?Object(xr["a"])({},r):null},setWatchedUser:function(e,t){var r=t.user;e.watchedUser=r},setNewUser:function(e,t){var r=t.user;e.loggedinUser=r},saveUser:function(e,t){var r=t.user;e.users.push(r)},removeUser:function(e,t){var r=t.userId;e.users=e.users.filter((function(e){return e._id!==r}))},setUserScore:function(e,t){var r=t.score;e.loggedinUser.score=r}},actions:{setLoggedinUser:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,o=t.user;try{n({type:"setLoggedinUser",user:o})}catch(s){console.log(s)}case 3:case"end":return r.stop()}}),r)})))()},login:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.username,s=t.password,r.prev=2,r.next=5,we.login(o,s);case 5:return a=r.sent,n({type:"setLoggedinUser",user:a}),r.abrupt("return",a);case 10:throw r.prev=10,r.t0=r["catch"](2),console.log("userStore: Error in login",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})))()},signup:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o,s,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.username,s=t.password,a=t.fullname,r.prev=2,console.log("here"),console.log(o,s,a),r.next=7,we.signup(o,s,a);case 7:return i=r.sent,n({type:"setLoggedinUser",user:i}),r.abrupt("return",i);case 12:throw r.prev=12,r.t0=r["catch"](2),console.log("userStore: Error in signup",r.t0),r.t0;case 16:case"end":return r.stop()}}),r,null,[[2,12]])})))()},logout:function(e){return Object(re["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,we.logout();case 4:r({type:"setLoggedinUser",user:null}),t.next=11;break;case 7:throw t.prev=7,t.t0=t["catch"](1),console.log("userStore: Error in logout",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},loadUsers:function(e){return Object(re["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,we.getUsers();case 4:n=t.sent,r({type:"setUsers",users:n}),t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](1),console.log("userStore: Error in loadUsers",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},loadAndWatchUser:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.userId,r.prev=2,r.next=5,we.getById(o);case 5:s=r.sent,n({type:"setWatchedUser",user:s}),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](2),console.log("userStore: Error in loadAndWatchUser",r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},removeUser:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.userId,r.prev=2,r.next=5,we.remove(o);case 5:n({type:"removeUser",userId:o}),r.next=12;break;case 8:throw r.prev=8,r.t0=r["catch"](2),console.log("userStore: Error in removeUser",r.t0),r.t0;case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))()},updateUser:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.user,r.prev=2,r.next=5,we.update(o);case 5:o=r.sent,n({type:"setUser",user:o}),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](2),console.log("userStore: Error in updateUser",r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})))()},increaseScore:function(e){return Object(re["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,we.changeScore(100);case 4:n=t.sent,r({type:"setUserScore",score:n}),t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](1),console.log("userStore: Error in increaseScore",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}}),Tr={add:Er,query:Rr,remove:Or};function Rr(e){var t=e?"?id=".concat(e):"";return console.log("queryStr",t),me.get("review".concat(t))}function Or(e){return me.delete("review/".concat(e))}function Er(e){return Sr.apply(this,arguments)}function Sr(){return Sr=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,me.post("review",t);case 2:return r=e.sent,console.log("addedReview",r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}Object(re["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ne.query("review");case 2:t=e.sent,window.addEventListener("storage",Object(re["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Storage updated"),e.next=3,ne.query("review");case 3:r=e.sent,r.length===t.length+1&&(console.log("Review Added - localStorage updated from another browser"),socketService.emit(SOCKET_EVENT_REVIEW_ADDED,r[r.length-1])),t=r;case 6:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})))();var Ur=r("2909"),$r=Cr();function Cr(){var e={},t={listenersMap:e,setup:function(){e={}},terminate:function(){this.setup()},on:function(t,r){e[t]=[].concat(Object(Ur["a"])(e[t]||[]),[r])},off:function(t,r){e[t]&&(r?e[t]=e[t].filter((function(e){return e!==r})):delete e[t])},emit:function(t,r){e[t]&&e[t].forEach((function(e){e(r)}))},debugMsg:function(){this.emit("chat addMsg",{from:"Someone",txt:"Aha it worked!"})}};return t}window.socketService=$r,$r.setup();var Ir={state:{reviews:[]},getters:{reviews:function(e){return e.reviews}},mutations:{setReviews:function(e,t){var r=t.reviews;e.reviews=r},addReview:function(e,t){var r=t.review;e.reviews.push(r),console.log("state.reviews",e.reviews)},removeReview:function(e,t){var r=t.reviewId;e.reviews=e.reviews.filter((function(e){return e._id!==r}))}},actions:{addReview:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.review,r.prev=1,r.next=4,Tr.add(n);case 4:return r.next=6,Tr.query(n.aboutToyId);case 6:return o=r.sent,e.commit({type:"setReviews",reviews:o}),r.abrupt("return",o);case 11:throw r.prev=11,r.t0=r["catch"](1),console.log("reviewStore: Error in addReview",r.t0),r.t0;case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()},loadReviews:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.toyId,r.prev=1,console.log("toyId",n),r.next=5,Tr.query(n);case 5:o=r.sent,e.commit({type:"setReviews",reviews:o}),r.next=13;break;case 9:throw r.prev=9,r.t0=r["catch"](1),console.log("reviewStore: Error in loadReviews",r.t0),r.t0;case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))()},removeReview:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.reviewId,r.prev=1,r.next=4,Tr.remove(n);case 4:e.commit({type:"removeReview",reviewId:n}),r.next=11;break;case 7:throw r.prev=7,r.t0=r["catch"](1),console.log("reviewStore: Error in removeReview",r.t0),r.t0;case 11:case"end":return r.stop()}}),r,null,[[1,7]])})))()}}};n["default"].use(wr["a"]);var Lr=new wr["a"].Store({strict:!0,modules:{toyStore:jr,userStore:kr,reviewStore:Ir},state:{},mutations:{},actions:{}});r("fce9");n["default"].config.productionTip=!1,n["default"].use(O.a),n["default"].use(E,{load:{key:"AIzaSyD7RxmUM9YBW-knQBdcGBuSXGVfNP1qmaY",libraries:"places"}}),new n["default"]({router:br,store:Lr,render:function(e){return e(T)}}).$mount("#app")},"5bf1":function(e,t,r){e.exports=r.p+"img/toy7.b3d3f7f5.png"},"6c9e":function(e,t,r){e.exports=r.p+"img/toy6.3776a9e2.png"},"8e90":function(e,t,r){e.exports=r.p+"img/toy4.fbe39bd3.png"},"95f5":function(e,t,r){var n={"./toy1.png":"f71e","./toy2.png":"b471","./toy3.png":"ba63","./toy4.png":"8e90","./toy5.png":"c93f","./toy6.png":"6c9e","./toy7.png":"5bf1"};function o(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=s,e.exports=o,o.id="95f5"},"9ddd":function(e,t,r){e.exports=r.p+"img/add-user.be9c926a.png"},b471:function(e,t,r){e.exports=r.p+"img/toy2.6a3fc5fb.png"},ba63:function(e,t,r){e.exports=r.p+"img/toy3.58ed084f.png"},c93f:function(e,t,r){e.exports=r.p+"img/toy5.5dd73eda.png"},f71e:function(e,t,r){e.exports=r.p+"img/toy1.b5484b6f.png"},fce9:function(e,t,r){}});
//# sourceMappingURL=app.10f7e80b.js.map